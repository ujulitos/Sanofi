<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="es" />

    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Last-Modified" content="0">
    <meta http-equiv="Cache-Control" content="no-cache, mustrevalidate">
    <meta http-equiv="Pragma" content="no-cache">

    <script src="js/jquery-2.1.1.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.ui.touch-punch.min.js"></script>
    <script src="js/preloadjs-0.6.2.min.js"></script>
    <script src="../js/Buzz.min.js"></script> <!-- colocar esta ruta por la actualizacion de google de no mas de 75 mediaplayers o audios en cada pagweb -->
     <script src="js/Audios.js"></script>    <!-- colocar esta ruta por la actualizacion de google de no mas de 75 mediaplayers o audios en cada pagweb -->
    <script src="js/TweenMax.min.js"></script>
    <script src="js/Time.js"></script>
    <script src="js/Animations.min.js"></script>
    <script src="js/bounce.min.js"></script>
    <link rel="stylesheet" href="css/Reset.css" type="text/css" charset="utf-8" />
    <link rel="stylesheet" href="css/Style.css" type="text/css" charset="utf-8" />
    <title>Slide 1</title>
</head>

<body onresize="location.reload()">
    <div id="contenido">
        <img id="fondo" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_19_5/fondo.png"></img>
        <img id="pleca" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_19_5/pleca.png"></img>
        <img id="imagen0" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_19_5/img00.png"></img>
        <img id="imagen1" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_19_5/img01.png"></img>
        <!-- <img id="instrucciones" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_19_5/instrucciones.png"></img> -->
    <!-- *********************************************Escenario 1************************************************* -->
        <img id="escenario1" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_19_5/escenario1.png">
        <img id="intro1" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_19_5/intro1.png">

        <div _id="1_1" id="escena1_lugar1_1" class="element boton drop " _origenx="578.447" _origeny="174.496" style="width:119.553px; height:20.632px;"></div>

        <div _id="2_1" id="escena1_lugar2_1" class="element boton drop" _origenx="521.45" _origeny="261" style="width:166.492px; height:76.591px;"></div>
        
        <div _id="3_1" id="escena1_lugar3_1" class="element boton drop" _origenx="521.45" _origeny="358" style="width:166.492px; height:76.591px;"></div>
        
        <div _id="4_1" id="escena1_lugar4_1" class="element boton drop" _origenx="521.45" _origeny="469.844" style="width:166.492px; height:60.616px;"></div>


        <img _id="1_4" id="escena1_drag1" class="element drag" _origenx="774.372" _origeny="101.378" src="images/SANOFI_HSE_19_5/escena1_drag1.png"></img>

        <img _id="2_3" id="escena1_drag2" class="element drag" _origenx="758.599" _origeny="184.813" src="images/SANOFI_HSE_19_5/escena1_drag2.png"></img>

        <img _id="3_1" id="escena1_drag3" class="element drag" _origenx="812.118" _origeny="324.556" src="images/SANOFI_HSE_19_5/escena1_drag3.png"></img>

        <img _id="4_2" id="escena1_drag4" class="element drag" _origenx="774.372" _origeny="385.997" src="images/SANOFI_HSE_19_5/escena1_drag4.png"></img>


        <!-- *********************************************Escenario 2************************************************* -->
            <img id="escenario2" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_19_5/escenario2.png">
            <img id="intro2" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_19_5/intro2.png">

            <div _id="1_1" id="escena2_lugar1_1" class="element boton drop dropEquis" _origenx="493" _origeny="172.618" style="width:26.792px; height:26.791px;"></div>

            <div _id="2_1" id="escena2_lugar2_1" class="element boton drop dropEquis" _origenx="493" _origeny="204.618" style="width:26.791px; height:26.791px;"></div>
            
            <div _id="3_3" id="escena2_lugar3_1" class="element boton drop dropEquis" _origenx="605" _origeny="169.618" style="width:26.791px; height:26.791px;"></div>
            
            <div _id="4_4" id="escena2_lugar4_1" class="element boton drop dropEquis" _origenx="626" _origeny="231.618" style="width:26.791px; height:26.791px;"></div>

            <div _id="5_1" id="escena2_lugar5_1" class="element boton drop" _origenx="590.523" _origeny="279" style="width:94.144px; height:31.019px;"></div>

            <div _id="6_1" id="escena2_lugar6_1" class="element boton drop" _origenx="518" _origeny="315.709" style="width:171.333px; height:80px;"></div>

            <div _id="7_1" id="escena2_lugar7_1" class="element boton drop" _origenx="518" _origeny="401.667" style="width:171.333px; height:101.754px;"></div>


            <img _id="1_1" id="escena2_drag1" class="element drag dragEquis" _origenx="758.599" _origeny="163.618" src="images/SANOFI_HSE_19_5/escena2_drag1.png"></img>
            <img _id="2_2" id="escena2_drag2" class="element drag dragEquis" _origenx="814.45" _origeny="163.618" src="images/SANOFI_HSE_19_5/escena2_drag1.png"></img>
            <img _id="3_3" id="escena2_drag3" class="element drag dragEquis" _origenx="870.301" _origeny="163.618" src="images/SANOFI_HSE_19_5/escena2_drag1.png"></img>
            <img _id="4_4" id="escena2_drag4" class="element drag dragEquis" _origenx="926.152" _origeny="163.618" src="images/SANOFI_HSE_19_5/escena2_drag1.png"></img>

            <img _id="5_7" id="escena2_drag5" class="element drag" _origenx="758.599" _origeny="212.676" src="images/SANOFI_HSE_19_5/escena2_drag2.png"></img>

            <img _id="6_5" id="escena2_drag6" class="element drag" _origenx="812.118" _origeny="335.272" src="images/SANOFI_HSE_19_5/escena2_drag3.png"></img>

            <img _id="7_6" id="escena2_drag7" class="element drag" _origenx="774.372" _origeny="385.997" src="images/SANOFI_HSE_19_5/escena2_drag4.png"></img>



        <!-- *********************************************************************************************************** -->
        <img id="escenarioFinal" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_19_5/escenarioFinal.png">
        <img id="botonSiguiente" class="element" _origenx="898.451" _origeny="201.901" src="images/SANOFI_HSE_19_5/boton_siguiente.png"></img>
         <img id="botonEva1" class="element" _origenx="408.021" _origeny="420.231" src="images/SANOFI_HSE_19_5/boton1.png"></img>
         <img id="botonEva2" class="element" _origenx="650.787" _origeny="420.231" src="images/SANOFI_HSE_19_5/boton2.png"></img>

      

        <!-- cargador -->
        <img id="cargando" class="cargando" src="../images/cargando.gif"></img>
        <canvas id="canvas_id"></canvas>

    </div>
</body>
<style>
    .boton {
        background-color: rgba(167, 255, 108, 0);
    }

    #tiempoDIV {
        position: absolute;
        width: 44.064px;
        height: 40.746px;
    }

    #tiempoTXT {
        font-size: 40px;
        color: #ffffff;
        font-weight: 600;
    }
</style>
<script>
    $(document).ready(function() {

        

        //var dragsColocados = new Array();
        //var aciertos = 0;
    
        //var Puntuacion = 0;
        //var minimo = 80;

        cacularEscala();
        ajustarEscenario();
         var Audios = new Array();
        
         Audios[1] = new buzz.sound("audios/SIndustrial_HSE_19_03", {
            formats: ["mp3"],
            preload: true
        });
         Audios[2] = new buzz.sound("audios/SIndustrial_HSE_19_04", {
            formats: ["mp3"],
            preload: true
        });
         Audios[3] = new buzz.sound("audios/SIndustrial_HSE_19_05", {
            formats: ["mp3"],
            preload: true
        });
         Audios[4] = new buzz.sound("audios/SIndustrial_HSE_19_02_extra", {
            formats: ["mp3"],
            preload: true
        });
         
        //parent.bloqueaEvaluacion();
        //parent.desbloqueaEvaluacion();
        function preload() {
            animacion_entrada($("#cargando"), "default", .2, 0);
            var preload = new createjs.LoadQueue();
            preload.addEventListener("complete", iniciaCargador);
            $.each($('.element'), function() {
                preload.loadFile($("#" + this.id).attr('src'));
                //console.log($("#" + this.id).attr('src'));
            });
        }

        function iniciaCargador(event) {
            console.log('load complete');
            $.each($('.element'), function() {
                inicializar($("#" + this.id));
            });
            $("#cargando").show();
            $("#cargando").css({
                'opacity': '1'
            });
            animacion_salida($("#cargando"), "desaparece", 0, muestraContenido);
        }


        function muestraContenido() {
            animacion_entrada($("#fondo"), "default", 0, 0);
            animacion_entrada($("#pleca"), "default", 0, 0);
            animacion_entrada($("#imagen0"), "izq_der", .7, .8);
            
            //parent.playAudio(50, 1000,parpadeaSiguiente);
            playAudio2(Audios[1], 1000, parpadeaSiguiente);
           
            /*setTimeout(function() {
                        comenzarEvaluacion2();
                    }, 1500);*/
          
            
        }
        function parpadeaSiguiente(){
            parpadea($("#botonSiguiente"),0);
        }

        $("#botonSiguiente").click(function() {
            if ($(this).css('cursor') == 'pointer') {
                    TweenMax.killTweensOf($(this));
                    $(this).hide();
                    animacion_salida($("#imagen0"), "desaparece", 0, 0);
                    animacion_entrada($("#imagen1"), "izq_der", .7, .8);
                    animacion_entrada($("#botonEva1"), "izq_der", .7, 12);
                    animacion_entrada($("#botonEva2"), "der_izq", .7, 15);
                   // parent.playAudio(51, 1000,terminaAudio2);
                     playAudio2(Audios[2], 1000, terminaAudio2);
                    
            }        
        });

        /*function terminaAudio1(){
            animacion_entrada($("#imagen1"), "izq_der", .7, .8);
            animacion_entrada($("#botonEva1"), "izq_der", .7, 12);
            animacion_entrada($("#botonEva2"), "der_izq", .7, 15);
            parent.playAudio(51, 1000,terminaAudio2);
        }*/
        function terminaAudio2() {
        
            parpadea($("#botonEva1"),0);
            parpadea($("#botonEva2"),0);    
         
        }

        $("#botonEva1").click(function() {
            if ($(this).css('cursor') == 'pointer') {
                    TweenMax.killTweensOf($(this));
                    $(this).hide();
                    $("#botonEva2").hide();
                    //pregunta();
                    animacion_salida($("#imagen1"), "desaparece", 0, 0);
                    //animacion_entrada($("#escenario"), "arriba_abajo", .7, .5);
                    setTimeout(function() {
                        comenzarEvaluacion1();
                    }, 1500);
                    //pregunta();
                    
            }        
        });

        $("#botonEva2").click(function() {
            if ($(this).css('cursor') == 'pointer') {
                    TweenMax.killTweensOf($(this));
                    $(this).hide();
                    //pregunta();
                    $("#botonEva1").hide();
                    animacion_salida($("#imagen1"), "desaparece", 0, 0);
                    //animacion_entrada($("#escenario"), "arriba_abajo", .7, .5);
                    setTimeout(function() {
                        comenzarEvaluacion2();
                    }, 1500);
                    //pregunta();
                    
            }        
         });
    


        function comenzarEvaluacion1(){
           // console.log('Comienza evaluacion con puntuacion acumulada:',parent.puntuacion);
           animacion_entrada($("#intro1"), "arriba_abajo", .7, .5);
           animacion_entrada($("#escenario1"), "arriba_abajo", .7, .5);
          var dropActivoId= "";
          var dragActivoId= "";
          //var dropActivoId= "";
          var dragActivoLugar= "";
          var dropActivoLugar= "";
          var cuantosLugares =4;
          var cuantasPiezas = 4;
          var contador = 0;
            for (i = 1; i <= cuantasPiezas; i++) {
                
                //$("#drop"+i).show();
                //animacion_entrada($("#hit" + i), "der_izq", .5, .5 + (i * 0));

                animacion_entrada($("#escena1_drag" + i), "der_izq", .5, 0 + (i * .05));
                // animacion_entrada($("#imagen" + (i + 3)), "der_izq", .5, .5 + (i * .1));
                animacion_entrada($("#escena1_lugar" + i + "_1"), "default", .5, 0 + (i * 0));
            }

            $(".drag").css("cursor", "pointer");
            $(".drag").draggable({
              revert: "invalid",
              start: function( event, ui ) {

                var esteID = $(this).attr("_id");
                var esteIDSubstr = $(this).attr("_id").substr(0, 1);
                var esteIDLugar = $(this).attr("_id").substr(-1);
                console.log("Drag seleccionado Id: " + esteIDSubstr +" Lugar: "+esteIDLugar);
                dragActivoId = esteIDSubstr;
                dragActivoLugar = esteIDLugar;
                                        
                }
            });

            $("#escena1_lugar1_1").droppable({
                accept: "#escena1_drag3",
                tolerance: "intersect",
                drop: function(event, ui) {
                        var esteID = $(this).attr("_id");
                        var esteIDSubstr = $(this).attr("_id").substr(0, 1);
                        var esteIDLugarDrop = $(this).attr("_id").substr(-1);
                        console.log("Colision con: " + esteIDSubstr +" Lugar: "+esteIDLugarDrop);
                        
                        dropActivoId = esteIDSubstr;
                        dropActivoLugar = esteIDLugarDrop;
                        
                        //$(".drop").hide();
                        checkMatch();
                }
            });
            $("#escena1_lugar2_1").droppable({
                accept: "#escena1_drag4",
                tolerance: "intersect",
                drop: function(event, ui) {
                        var esteID = $(this).attr("_id");
                        var esteIDSubstr = $(this).attr("_id").substr(0, 1);
                        var esteIDLugarDrop = $(this).attr("_id").substr(-1);
                        console.log("Colision con: " + esteIDSubstr +" Lugar: "+esteIDLugarDrop);
                        
                        dropActivoId = esteIDSubstr;
                        dropActivoLugar = esteIDLugarDrop;
                        
                        //$(".drop").hide();
                        checkMatch();
                }
            });
            $("#escena1_lugar3_1").droppable({
                accept: "#escena1_drag2",
                tolerance: "intersect",
                drop: function(event, ui) {
                        var esteID = $(this).attr("_id");
                        var esteIDSubstr = $(this).attr("_id").substr(0, 1);
                        var esteIDLugarDrop = $(this).attr("_id").substr(-1);
                        console.log("Colision con: " + esteIDSubstr +" Lugar: "+esteIDLugarDrop);
                        
                        dropActivoId = esteIDSubstr;
                        dropActivoLugar = esteIDLugarDrop;
                        
                        //$(".drop").hide();
                        checkMatch();
                }
            });
            $("#escena1_lugar4_1").droppable({
                accept: "#escena1_drag1",
                tolerance: "intersect",
                drop: function(event, ui) {
                        var esteID = $(this).attr("_id");
                        var esteIDSubstr = $(this).attr("_id").substr(0, 1);
                        var esteIDLugarDrop = $(this).attr("_id").substr(-1);
                        console.log("Colision con: " + esteIDSubstr +" Lugar: "+esteIDLugarDrop);
                        
                        dropActivoId = esteIDSubstr;
                        dropActivoLugar = esteIDLugarDrop;
                        
                        //$(".drop").hide();
                        checkMatch();
                }
            });

           

           
            
        function checkMatch(){
            console.log('Entra en check');
            contador++;
                var elLeft = parseInt($("#escena1_lugar"+dropActivoId+"_1").css("left").substr(0, $("#escena1_lugar"+dropActivoId+"_1").css("left").length - 2)) - 2 + "px";
                   // console.log('elLeft', elLeft);
                var elTop = parseInt($("#escena1_lugar"+dropActivoId+"_1").css("top").substr(0, $("#escena1_lugar"+dropActivoId+"_1").css("top").length - 2)) + "px";
                $("#escena1_drag"+dragActivoId).css({
                    'left': elLeft ,
                    'top': elTop
                }); 
                $("#escena1_lugar"+dropActivoId+"_1").hide();
                //$("#drag"+contador).hide();
                
                  //  console.log('elTop', elTop);

    
               
                /*console.log('contador...' + contador);
                if (dragActivoLugar == dropActivoLugar) {
                   console.log('Es correcto, corresponden!');
                    aciertos = aciertos + 1;                    
                    animacion_entrada($("#paloma"+ contador), "default", .5,.5);
                    // retroBuena();         
                }else{
                     // retroMala(dropActivoSubstr);
                    console.log('Error, No corresponden!');                     
                    console.log('aciertos...' + aciertos);
                    animacion_entrada($("#tache"+ contador), "default", .5,.5);
                }*/

                // console.log('contador ' + contador + ' totalAciertos ' + totalAciertos);
                if (contador == cuantasPiezas){
                    console.log('Termina');                   
                    //terminarPantalla();
                    setTimeout(function() {
                        retroalimenta();
                    }, 1000);
                    
                }//else{                   
                    
                   /*setTimeout(function() {
                        desapareceImagenes();
                    }, 1500);*/
                //}
            

           }

        function retroalimenta(){
            console.log('Entra a retro');
            animacion_salida($("#escenario1"), "desaparece", 0,0);
            animacion_salida($("#intro1"), "desaparece", 0, 0);
            for (i = 1; i <= cuantasPiezas; i++) {
                
                animacion_salida($("#escena1_drag" + i), "desaparece", 0, 0);
                
                animacion_salida($("#escena1_lugar" + i + "_1"), "desaparece", 0, 0);
            }
            animacion_entrada($("#escenarioFinal"), "default", .7,0);
            //parent.playAudio(52, 1000,terminarPantalla);
             playAudio2(Audios[3], 1000, terminarPantalla);

            //animacion_entrada($("#paloma"), "der_izq", .7,0.5);
            //terminarPantalla();
            /*animacion_salida($("#paloma"+totalPreguntas), "desaparece",0);
           
            animacion_salida($("#tache"+totalPreguntas), "desaparece",0);
                  

            animacion_salida($("#lugar"+ totalPreguntas +"_1"), "desaparece",0);
            animacion_salida($("#lugar"+ totalPreguntas +"_2"), "desaparece",0);

            animacion_salida($("#drag"+totalPreguntas), "desaparece",0);           
            animacion_salida($("#preg"+totalPreguntas), "desaparece",0);

            puntuacion = Math.round((aciertos * 100) / totalPreguntas);
           
            console.log('puntuacion',puntuacion);
            if (puntuacion >= minimo) {
                animacion_entrada($("#puntajeDIV"), "default", .5, .5);
                document.getElementById("puntajeTXT").innerHTML = puntuacion;
                animacion_entrada($("#retroBien"), "default", .5, .5);
                parpadea($('#botonContinuar'),1);
                //terminarPantalla();
            } else {
                animacion_entrada($("#puntajeDIV2"), "default", .5, .5);
                document.getElementById("puntajeTXT2").innerHTML = puntuacion;
                animacion_entrada($("#retroMal"), "default", .5, .5);
                parpadea($('#botonReintentar'),1);
            };*/
        }


         $("#botonReintentar").click(function(e) {
           // console.log('boton reintentar');
              e.preventDefault();
           //   parent.intento++;
           //  console.log("Entro al intento_", parent.intento);
              parent.stopAll();
              location.reload();
            //parent.puntuacion = 0; // reinicio la puntuacion para volver a empezar
            //parent.goPage(0);// se va ala pagina # tal
         });

         $("#botonContinuar").click(function() {
          
              parent.nextPage();
           
         });
    }

    function comenzarEvaluacion2(){

           // console.log('Comienza evaluacion con puntuacion acumulada:',parent.puntuacion);
           animacion_entrada($("#intro2"), "arriba_abajo", .7, .5);
           animacion_entrada($("#escenario2"), "arriba_abajo", .7, .5);
          var dropActivoId= "";
          var dragActivoId= "";
          //var dropActivoId= "";
          var dragActivoLugar= "";
          var dropActivoLugar= "";
          var cuantosLugares = 7;
          var cuantasPiezas = 7;
          var contador = 0;
            for (i = 1; i <= cuantasPiezas; i++) {
                
                //$("#drop"+i).show();
                //animacion_entrada($("#hit" + i), "der_izq", .5, .5 + (i * 0));

                animacion_entrada($("#escena2_drag" + i), "der_izq", .5, 0 + (i * .05));
                // animacion_entrada($("#imagen" + (i + 3)), "der_izq", .5, .5 + (i * .1));
                animacion_entrada($("#escena2_lugar" + i + "_1"), "default", .5, 0 + (i * 0));
            }

            $(".drag").css("cursor", "pointer");
            $(".drag").draggable({
              revert: "invalid",
              start: function( event, ui ) {

                var esteID = $(this).attr("_id");
                var esteIDSubstr = $(this).attr("_id").substr(0, 1);
                var esteIDLugar = $(this).attr("_id").substr(-1);
                console.log("Drag seleccionado Id: " + esteIDSubstr +" Lugar: "+esteIDLugar);
                dragActivoId = esteIDSubstr;
                dragActivoLugar = esteIDLugar;
                                        
                }
            });

            $(".dropEquis").droppable({
                accept: ".dragEquis",
                tolerance: "intersect",
                drop: function(event, ui) {
                        var esteID = $(this).attr("_id");
                        var esteIDSubstr = $(this).attr("_id").substr(0, 1);
                        var esteIDLugarDrop = $(this).attr("_id").substr(-1);
                        console.log("Colision con: " + esteIDSubstr +" Lugar: "+esteIDLugarDrop);
                        
                        dropActivoId = esteIDSubstr;
                        dropActivoLugar = esteIDLugarDrop;
                        
                        //$(".drop").hide();
                        checkMatch();
                }
            });
            $("#escena2_lugar5_1").droppable({
                accept: "#escena2_drag6",
                tolerance: "intersect",
                drop: function(event, ui) {
                        var esteID = $(this).attr("_id");
                        var esteIDSubstr = $(this).attr("_id").substr(0, 1);
                        var esteIDLugarDrop = $(this).attr("_id").substr(-1);
                        console.log("Colision con: " + esteIDSubstr +" Lugar: "+esteIDLugarDrop);
                        
                        dropActivoId = esteIDSubstr;
                        dropActivoLugar = esteIDLugarDrop;
                        
                        //$(".drop").hide();
                        checkMatch();
                }
            });
            $("#escena2_lugar6_1").droppable({
                accept: "#escena2_drag7",
                tolerance: "intersect",
                drop: function(event, ui) {
                        var esteID = $(this).attr("_id");
                        var esteIDSubstr = $(this).attr("_id").substr(0, 1);
                        var esteIDLugarDrop = $(this).attr("_id").substr(-1);
                        console.log("Colision con: " + esteIDSubstr +" Lugar: "+esteIDLugarDrop);
                        
                        dropActivoId = esteIDSubstr;
                        dropActivoLugar = esteIDLugarDrop;
                        
                        //$(".drop").hide();
                        checkMatch();
                }
            });
            $("#escena2_lugar7_1").droppable({
                accept: "#escena2_drag5",
                tolerance: "intersect",
                drop: function(event, ui) {
                        var esteID = $(this).attr("_id");
                        var esteIDSubstr = $(this).attr("_id").substr(0, 1);
                        var esteIDLugarDrop = $(this).attr("_id").substr(-1);
                        console.log("Colision con: " + esteIDSubstr +" Lugar: "+esteIDLugarDrop);
                        
                        dropActivoId = esteIDSubstr;
                        dropActivoLugar = esteIDLugarDrop;
                        
                        //$(".drop").hide();
                        checkMatch();
                }
            });

           

           
            
        function checkMatch(){
            console.log('Entra en check');
            contador++;
                var elLeft = parseInt($("#escena2_lugar"+dropActivoId+"_1").css("left").substr(0, $("#escena2_lugar"+dropActivoId+"_1").css("left").length - 2)) - 2 + "px";
                   // console.log('elLeft', elLeft);
                var elTop = parseInt($("#escena2_lugar"+dropActivoId+"_1").css("top").substr(0, $("#escena2_lugar"+dropActivoId+"_1").css("top").length - 2)) + "px";
                $("#escena2_drag"+dragActivoId).css({
                    'left': elLeft ,
                    'top': elTop,
                    'cursor':'default'
                   
                }); 
                $("#escena2_lugar"+dropActivoId+"_1").hide();
                $("#escena2_drag"+dragActivoId).draggable( "disable");
                //$("#drag"+contador).hide();
                
                  //  console.log('elTop', elTop);

    
               
                /*console.log('contador...' + contador);
                if (dragActivoLugar == dropActivoLugar) {
                   console.log('Es correcto, corresponden!');
                    aciertos = aciertos + 1;                    
                    animacion_entrada($("#paloma"+ contador), "default", .5,.5);
                    // retroBuena();         
                }else{
                     // retroMala(dropActivoSubstr);
                    console.log('Error, No corresponden!');                     
                    console.log('aciertos...' + aciertos);
                    animacion_entrada($("#tache"+ contador), "default", .5,.5);
                }*/

                // console.log('contador ' + contador + ' totalAciertos ' + totalAciertos);
                if (contador == cuantasPiezas){
                    console.log('Termina');                   
                    //terminarPantalla();
                    setTimeout(function() {
                        retroalimenta();
                    }, 1000);
                    
                }//else{                   
                    
                   /*setTimeout(function() {
                        desapareceImagenes();
                    }, 1500);*/
                //}
            

           }

        function retroalimenta(){
            console.log('Entra a retro');
            animacion_salida($("#escenario2"), "desaparece", 0,0);
            animacion_salida($("#intro2"), "desaparece", 0, 0);
            for (i = 1; i <= cuantasPiezas; i++) {
                
                animacion_salida($("#escena2_drag" + i), "desaparece", 0, 0);
                
                animacion_salida($("#escena2_lugar" + i + "_1"), "desaparece", 0, 0);
            }
            animacion_entrada($("#escenarioFinal"), "default", .7,0);
            //parent.playAudio(52, 1000,terminarPantalla);
             playAudio2(Audios[3], 1000, terminarPantalla);
            //animacion_entrada($("#paloma"), "der_izq", .7,0.5);
            //terminarPantalla();
            /*animacion_salida($("#paloma"+totalPreguntas), "desaparece",0);
           
            animacion_salida($("#tache"+totalPreguntas), "desaparece",0);
                  

            animacion_salida($("#lugar"+ totalPreguntas +"_1"), "desaparece",0);
            animacion_salida($("#lugar"+ totalPreguntas +"_2"), "desaparece",0);

            animacion_salida($("#drag"+totalPreguntas), "desaparece",0);           
            animacion_salida($("#preg"+totalPreguntas), "desaparece",0);

            puntuacion = Math.round((aciertos * 100) / totalPreguntas);
           
            console.log('puntuacion',puntuacion);
            if (puntuacion >= minimo) {
                animacion_entrada($("#puntajeDIV"), "default", .5, .5);
                document.getElementById("puntajeTXT").innerHTML = puntuacion;
                animacion_entrada($("#retroBien"), "default", .5, .5);
                parpadea($('#botonContinuar'),1);
                //terminarPantalla();
            } else {
                animacion_entrada($("#puntajeDIV2"), "default", .5, .5);
                document.getElementById("puntajeTXT2").innerHTML = puntuacion;
                animacion_entrada($("#retroMal"), "default", .5, .5);
                parpadea($('#botonReintentar'),1);
            };*/
        }


         $("#botonReintentar").click(function(e) {
           // console.log('boton reintentar');
              e.preventDefault();
           //   parent.intento++;
           //  console.log("Entro al intento_", parent.intento);
              parent.stopAll();
              location.reload();
            //parent.puntuacion = 0; // reinicio la puntuacion para volver a empezar
            //parent.goPage(0);// se va ala pagina # tal
         });

         $("#botonContinuar").click(function() {
          
              parent.nextPage();
           
         });
    
        
    }
        preload();
    });

</script>

</html>
