<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="es" />

    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Last-Modified" content="0">
    <meta http-equiv="Cache-Control" content="no-cache, mustrevalidate">
    <meta http-equiv="Pragma" content="no-cache">

    <script src="js/jquery-2.1.1.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/preloadjs-0.6.2.min.js"></script>
    <script src="../js/Buzz.min.js"></script> <!-- colocar esta ruta por la actualizacion de google de no mas de 75 mediaplayers o audios en cada pagweb -->
     <script src="js/Audios.js"></script>    <!-- colocar esta ruta por la actualizacion de google de no mas de 75 mediaplayers o audios en cada pagweb -->
    <script src="js/TweenMax.min.js"></script>
    <script src="js/Time.js"></script>
    <script src="js/Animations.min.js"></script>
    <script src="js/bounce.min.js"></script>
    <link rel="stylesheet" href="css/Reset.css" type="text/css" charset="utf-8" />
    <link rel="stylesheet" href="css/Style.css" type="text/css" charset="utf-8" />
    <title>Slide 1</title>
</head>

<body onresize="location.reload()">
    <div id="contenido">
        <img id="fondo" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_13/fondo.png"></img>
        <img id="pleca" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_13/pleca.png"></img>
        <img id="imagen1" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_13/img01.png"></img>
        <img id="imagen2" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_13/img02.png"></img>
        <img id="instrucciones" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_13/instrucciones.png"></img>
         <img id="instrucciones2" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_13/instrucciones2.png"></img>

        <img id="escenario" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_13/escenario.png">
       

        <div id="lugarTodo" class="element boton" _origenx="356.363" _origeny="193" style="width:486.637px; height:338px;"></div>
        <div id="lugar1" class="element boton" _origenx="644.429" _origeny="371.944" style="width:186.395px; height:128.247px;"></div>

       <!--  <div id="lugar2" class="element boton" _origenx="349.78" _origeny="191.66" style="width:168.04px; height:126.338px;"></div> -->
        
        <div id="lugar3" class="element boton" _origenx="539.2" _origeny="282.445" style="width:92.913px; height:111.902px;"></div>
        
        <div id="lugar4" class="element boton" _origenx="516.141" _origeny="372.751" style="width:145.134px; height:82.271px;"></div>

        <div id="lugar5" class="element boton" _origenx="434.925" _origeny="365.491" style="width:71.721px; height:112.841px;"></div>
        <div id="lugar6" class="element boton" _origenx="710.783" _origeny="491.33" style="width:131.57px; height:40.014px;"></div>

         <img id="zona1" class="element" _origenx="644.429" _origeny="371.944" src="images/SANOFI_HSE_13/zona1.png"></img>

        <img id="zona2" class="element" _origenx="349.78" _origeny="191.66" src="images/SANOFI_HSE_13/zona2.png"></img>
        
        <img id="zona3" class="element" _origenx="539.2" _origeny="282.445" src="images/SANOFI_HSE_13/zona3.png"></img>
        
        <img id="zona4" class="element" _origenx="516.141" _origeny="372.751" src="images/SANOFI_HSE_13/zona4.png"></img>

        <img id="zona5" class="element" _origenx="434.925" _origeny="365.491" src="images/SANOFI_HSE_13/zona5.png"></img>

        <img id="zona6" class="element" _origenx="710.783" _origeny="491.33" src="images/SANOFI_HSE_13/zona6.png"></img>


        <img id="retroBien" class="element" _origenx="0" _origeny="0" src="images/SANOFI_HSE_13/retroBien.png"></img>

       <img id="botonIniciar" class="element" _origenx="784" _origeny="253" src="images/SANOFI_HSE_13/botonIniciar.png"></img>

        <!-- cargador -->
        <img id="cargando" class="cargando" src="../images/cargando.gif"></img>
        <canvas id="canvas_id"></canvas>

    </div>
</body>
<style>

    .botonDefault{
        background-color: rgba(23, 73, 100, 0.3);
        cursor: default;
    }
    .boton {
        background-color: rgba(167, 255, 108, 0);
        cursor: pointer;
    }

    #tiempoDIV {
        position: absolute;
        width: 44.064px;
        height: 40.746px;
    }

    #tiempoTXT {
        font-size: 40px;
        color: #ffffff;
        font-weight: 600;
    }
</style>
<script>
    $(document).ready(function() {

        //var cuantosLugares = 10;
        var cuantasPiezas = 5;
        var contador = 0;
        var minimo = 80;
        var aciertos = 0;
        //var dragsColocados = new Array();
        //var aciertos = 0;
    
        //var Puntuacion = 0;
        //var minimo = 80;

        cacularEscala();
        ajustarEscenario();
        var Audios = new Array();

         Audios[1] = new buzz.sound("audios/SIndustrial_HSE_13_01", {
            formats: ["mp3"],
            preload: true
        });
         Audios[2] = new buzz.sound("audios/SIndustrial_HSE_13_02", {
            formats: ["mp3"],
            preload: true
        });
         Audios[3] = new buzz.sound("audios/SIndustrial_HSE_13_02_01", {
            formats: ["mp3"],
            preload: true
        });
         Audios[4] = new buzz.sound("audios/SIndustrial_HSE_13_02_02", {
            formats: ["mp3"],
            preload: true
        });
         Audios[5] = new buzz.sound("audios/SIndustrial_HSE_13_02_03", {
            formats: ["mp3"],
            preload: true
        });
         Audios[6] = new buzz.sound("audios/SIndustrial_HSE_13_02_04", {
            formats: ["mp3"],
            preload: true
        });
         Audios[7] = new buzz.sound("audios/SIndustrial_HSE_13_02_05", {
            formats: ["mp3"],
            preload: true
        });
         Audios[8] = new buzz.sound("audios/s_bien", {
            formats: ["mp3"],
            preload: true
        });
          Audios[9] = new buzz.sound("audios/SIndustrial_HSE_11_02_02", {
            formats: ["mp3"],
            preload: true
        });
          Audios[10] = new buzz.sound("audios/s_mal", {
            formats: ["mp3"],
            preload: true
        });
        //parent.bloqueaEvaluacion();
        //parent.desbloqueaEvaluacion();
        function preload() {
            animacion_entrada($("#cargando"), "default", .2, 0);
            var preload = new createjs.LoadQueue();
            preload.addEventListener("complete", iniciaCargador);
            $.each($('.element'), function() {
                preload.loadFile($("#" + this.id).attr('src'));
                //console.log($("#" + this.id).attr('src'));
            });
        }

        function iniciaCargador(event) {
            console.log('load complete');
            $.each($('.element'), function() {
                inicializar($("#" + this.id));
            });
            $("#cargando").show();
            $("#cargando").css({
                'opacity': '1'
            });
            animacion_salida($("#cargando"), "desaparece", 0, muestraContenido);
        }


        function muestraContenido() {
            animacion_entrada($("#fondo"), "default", 0, 0);
            animacion_entrada($("#pleca"), "default", 0, 0);
            animacion_entrada($("#imagen1"), "izq_der", .7, .3);
            animacion_entrada($("#imagen2"), "izq_der", .7, .5);
            animacion_entrada($("#instrucciones"), "izq_der", .7, 14);
            //parent.playAudio(35, 1000,terminaAudio2);
             playAudio2(Audios[1], 1000, terminaAudio2);
            
           /* setTimeout(function() {
                        comenzarEvaluacion();
                    }, 1500);*/
          
            
        }
        /*function terminaAudio1(){
            comenzarEvaluacion();
        }*/
        function terminaAudio2() {
        
            parpadea($("#botonIniciar"),0);
                
         
        }

         $("#botonIniciar").click(function() {
            if ($(this).css('cursor') == 'pointer') {
                    TweenMax.killTweensOf($(this));
                    $(this).hide();
                    //pregunta();
                    animacion_salida($("#imagen2"), "desaparece", 0, 0);
                    animacion_salida($("#instrucciones"), "desaparece", 0, 0);
                    //animacion_entrada($("#escenario"), "arriba_abajo", .7, .5);
                    setTimeout(function() {
                        comenzarEvaluacion();
                    }, 1500);
                    //pregunta();
                    
            }
         });
    


        function comenzarEvaluacion(){

            animacion_entrada($(".boton"), "default",0, 0 );
            animacion_entrada($("#escenario"), "arriba_abajo", .7, .5);
            animacion_entrada($("#instrucciones2"), "der_izq", .7, 4);
            //parent.playAudio(36, 1000);
              playAudio2(Audios[2], 1000);
                $("#lugar1").click(function() {
                    //console.log("i:",i);
                     
                    if ($(this).css('cursor') == 'pointer') {
                        TweenMax.killTweensOf($(this));
                        $(this).hide();
                        $(this).css("cursor", "default");
                        aciertos++;
                        console.log("correcto,aciertos:",aciertos);
                        animacion_entrada($("#zona1"), "default",0, 0);
                        // parent.playAudio(117, 500);
                        // parent.playAudio(132, 1000,verificaAciertos);
                        playAudio2(Audios[8], 1000);
                         playAudio2(Audios[6], 1000, verificaAciertos);
                        
                    }
                });
                // $("#lugar2").click(function() {
                //     //console.log("i:",i);
                     
                //     if ($(this).css('cursor') == 'pointer') {
                //         TweenMax.killTweensOf($(this));
                //         $(this).hide();
                //         $(this).css("cursor", "default");
                //         aciertos++;
                //         console.log("correcto,aciertos:",aciertos);
                //         animacion_entrada($("#zona2"), "default",0, 0);
                //         parent.playAudio(117, 500,verificaAciertos);

                        
                //     }
                // });
                $("#lugar3").click(function() {
                    //console.log("i:",i);
                     
                    if ($(this).css('cursor') == 'pointer') {
                        TweenMax.killTweensOf($(this));
                        $(this).hide();
                        $(this).css("cursor", "default");
                        aciertos++;
                        console.log("correcto,aciertos:",aciertos);
                        animacion_entrada($("#zona3"), "default",0, 0);
                        // parent.playAudio(117, 500);
                        // parent.playAudio(133, 1000,verificaAciertos);
                         playAudio2(Audios[8], 1000);
                         playAudio2(Audios[7], 1000, verificaAciertos);

                        
                    }
                });
                $("#lugar4").click(function() {
                    //console.log("i:",i);
                     
                    if ($(this).css('cursor') == 'pointer') {
                        TweenMax.killTweensOf($(this));
                        $(this).hide();
                        $(this).css("cursor", "default");
                        aciertos++;
                        console.log("correcto,aciertos:",aciertos);
                        animacion_entrada($("#zona4"), "default",0, 0);
                        // parent.playAudio(117, 500);
                        // parent.playAudio(130, 1000,verificaAciertos);
                         playAudio2(Audios[8], 1000);
                         playAudio2(Audios[4], 1000, verificaAciertos);

                        
                    }
                });
                $("#lugar5").click(function() {
                    //console.log("i:",i);
                     
                    if ($(this).css('cursor') == 'pointer') {
                        TweenMax.killTweensOf($(this));
                        $(this).hide();
                        $(this).css("cursor", "default");
                        aciertos++;
                        console.log("correcto,aciertos:",aciertos);
                        animacion_entrada($("#zona5"), "default",0, 0);
                        // parent.playAudio(117, 500);
                        // parent.playAudio(129, 1000,verificaAciertos);
                        playAudio2(Audios[8], 1000);
                         playAudio2(Audios[3], 1000, verificaAciertos);

                        
                    }
                });    

                $("#lugar6").click(function() {
                    //console.log("i:",i);
                     
                    if ($(this).css('cursor') == 'pointer') {
                        TweenMax.killTweensOf($(this));
                        $(this).hide();
                        $(this).css("cursor", "default");
                        aciertos++;
                        console.log("correcto,aciertos:",aciertos);
                        animacion_entrada($("#zona6"), "default",0, 0);
                        // parent.playAudio(117, 500);
                        // parent.playAudio(124, 1000,verificaAciertos);
                         playAudio2(Audios[8], 1000);
                         playAudio2(Audios[9], 1000, verificaAciertos);
                        
                    }
                });    
            
            $("#lugarTodo").click(function() {
                    if ($(this).css('cursor') == 'pointer') {
                        TweenMax.killTweensOf($(this));
                        //$(this).hide();
                        //$(this).css("cursor", "default");
                        //parent.playAudio(118, 500,verificaAciertos);
                        playAudio2(Audios[10], 500,verificaAciertos);
                    }
                }); 
             
             function verificaAciertos(){
                if(aciertos >= 5){
                            animacion_salida($("#escenario"), "desaparece", 0, 0);
                            animacion_salida($(".boton"), "desaparece", 0, 0);
                            animacion_salida($("#zona1"), "desaparece", 0, 0);
                            animacion_salida($("#zona2"), "desaparece", 0, 0);
                            animacion_salida($("#zona3"), "desaparece", 0, 0);
                            animacion_salida($("#zona4"), "desaparece", 0, 0);
                            animacion_salida($("#zona5"), "desaparece", 0, 0);
                            animacion_salida($("#zona6"), "desaparece", 0, 0);
                            animacion_salida($("#instrucciones2"), "desaparece", 0, 0);
                            animacion_salida($("#imagen1"), "desaparece", 0, 0);
                            animacion_entrada($("#retroBien"), "arriba_abajo", .7, .5,terminarPantalla);
                }
             }

        }

        preload();

    });

</script>

</html>
